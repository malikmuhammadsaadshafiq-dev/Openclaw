{
  "permissions": {
    "allow": [
      "Bash(ssh:*)",
      "Bash(python3 -c \"\nimport base64\nscript = ''''''\nwith open\\(''/root/mvp-factory/daemon/mvp-factory-daemon.ts'', ''r''\\) as f:\n    code = f.read\\(\\)\n\n# Find the writeFile line in sanitizePackageJson\nmarker = ''await fs.writeFile\\(pkgPath, JSON.stringify\\(pkg, null, 2\\)\\)''\nidx = code.find\\(marker\\)\nif idx < 0:\n    print\\(''ERROR: marker not found''\\)\n    exit\\(1\\)\n\n# Find the start of that line \\(go back to newline\\)\nline_start = code.rfind\\(''\\\\n'', 0, idx\\) + 1\n\ninject = \"\"\"\"\"\"    // Ensure required TypeScript devDeps exist for Next.js projects\n    if \\(!pkg.devDependencies\\) pkg.devDependencies = {};\n    const requiredDevDeps: Record<string, string> = {\n      \"\"typescript\"\": \"\"^5.7.3\"\",\n      \"\"@types/node\"\": \"\"^20.17.16\"\",\n      \"\"@types/react\"\": \"\"^18.3.18\"\",\n    };\n    for \\(const [dep, ver] of Object.entries\\(requiredDevDeps\\)\\) {\n      if \\(!pkg.devDependencies[dep] && !pkg.dependencies?.[dep]\\) {\n        pkg.devDependencies[dep] = ver;\n      }\n    }\n\n    // Ensure required dependencies exist\n    if \\(!pkg.dependencies\\) pkg.dependencies = {};\n    if \\(!pkg.dependencies.next\\) pkg.dependencies.next = \"\"^14.2.21\"\";\n    if \\(!pkg.dependencies.react\\) pkg.dependencies.react = \"\"^18.3.1\"\";\n    if \\(!pkg.dependencies[\"\"react-dom\"\"]\\) pkg.dependencies[\"\"react-dom\"\"] = \"\"^18.3.1\"\";\n\n\"\"\"\"\"\"\n\ncode = code[:line_start] + inject + code[line_start:]\n\nwith open\\(''/root/mvp-factory/daemon/mvp-factory-daemon.ts'', ''w''\\) as f:\n    f.write\\(code\\)\n\nprint\\(''SANITIZE UPDATED SUCCESSFULLY''\\)\n''''''\nprint\\(base64.b64encode\\(script.encode\\(\\)\\).decode\\(\\)\\)\n\")"
    ]
  }
}
