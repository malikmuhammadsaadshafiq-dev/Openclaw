'use client';import{useState}from'react';interface NodeItem{id:number;key:string;type:string;value:any;required:boolean}export default function Page(){const[nodes,setNodes]=useState<NodeItem[]>([{id:1,key:'id',type:'number',value:123,required:true},{id:2,key:'username',type:'string',value:'johndoe',required:true},{id:3,key:'email',type:'string',value:'john@example.com',required:true},{id:4,key:'isActive',type:'boolean',value:true,required:false},{id:5,key:'createdAt',type:'string',value:'2024-01-01',required:true},{id:6,key:'metadata',type:'object',value:{},required:false}]);const[jsonInput,setJsonInput]=useState('');const[newFieldName,setNewFieldName]=useState('');const[newFieldType,setNewFieldType]=useState('string');const[loading,setLoading]=useState(false);const[success,setSuccess]=useState('');const[generatedInterface,setGeneratedInterface]=useState('');const parseJson=async(e:React.FormEvent)=>{e.preventDefault();if(!jsonInput.trim())return;setLoading(true);await new Promise(r=>setTimeout(r,800));try{const parsed=JSON.parse(jsonInput);const newNodes:NodeItem[]=[];let id=Date.now();if(typeof parsed==='object'&&parsed!==null){Object.entries(parsed).forEach(([key,value])=>{const type=Array.isArray(value)?'array':typeof value;newNodes.push({id:id++,key,type,value,required:true})});setNodes(newNodes);generateInterface(newNodes);setSuccess('JSON parsed successfully!')}}catch(err){setSuccess('Invalid JSON format')}setLoading(false);setTimeout(()=>setSuccess(''),3000)};const generateInterface=(currentNodes:NodeItem[])=>{const fields=currentNodes.map(n=>{const optional=n.required?'':'?';return`  ${n.key}${optional}:${n.type};`}).join('\n');const code=`interface Schema{\n${fields}\n}`;setGeneratedInterface(code)};const addField=async(e:React.FormEvent)=>{e.preventDefault();if(!newFieldName)return;setLoading(true);await new Promise(r=>setTimeout(r,500));const newNode:NodeItem={id:Date.now(),key:newFieldName,type:newFieldType,value:null,required:true};const updated=[...nodes,newNode];setNodes(updated);generateInterface(updated);setNewFieldName('');setSuccess('Field added!');setLoading(false);setTimeout(()=>setSuccess(''),2000)};const deleteField=async(id:number)=>{setLoading(true);await new Promise(r=>setTimeout(r,300));const updated=nodes.filter(n=>n.id!==id);setNodes(updated);generateInterface(updated);setSuccess('Field deleted!');setLoading(false);setTimeout(()=>setSuccess(''),2000)};return(<main className="min-h-screen p-8"><div className="max-w-6xl mx-auto"><h1 className="text-4xl font-bold mb-8 text-center bg-clip-text text-transparent bg-gradient-to-r from-violet-400 to-fuchsia-400">SchemaFlow</h1><div className="grid grid-cols-1 lg:grid-cols-2 gap-6"><div className="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-6"><h2 className="text-xl font-semibold mb-4 text-violet-300">JSON Input</h2><form onSubmit={parseJson} className="space-y-4"><textarea value={jsonInput} onChange={(e)=>setJsonInput(e.target.value)} placeholder="Paste JSON API response here..." className="w-full h-40 p-4 rounded-xl bg-slate-800/50 border border-white/10 text-white placeholder-slate-400 focus:outline-none focus:border-violet-500 transition-colors font-mono text-sm"/><button type="submit" disabled={loading} className="w-full bg-gradient-to-r from-violet-500 to-fuchsia-500 hover:from-violet-600 hover:to-fuchsia-600 disabled:opacity-50 px-6 py-3 rounded-xl text-white font-semibold transition-all shadow-lg hover:shadow-violet-500/25">{loading?'Parsing...':'Parse JSON'}</button></form><form onSubmit={addField} className="mt-6 pt-6 border-t border-white/10"><h3 className="text-lg font-medium mb-3 text-violet-300">Add Field</h3><div className="flex gap-2"><input type="text" value={newFieldName} onChange={(e)=>setNewFieldName(e.target.value)} placeholder="Field name" className="flex-1 p-3 rounded-xl bg-slate-800/50 border border-white/10 text-white placeholder-slate-400 focus:outline-none focus:border-violet-500"/><select value={newFieldType} onChange={(e)=>setNewFieldType(e.target.value)} className="p-3 rounded-xl bg-slate-800/50 border border-white/10 text-white focus:outline-none focus:border-violet-500"><option value="string">string</option><option value="number">number</option><option value="boolean">boolean</option><option value="object">object</option><option value="array">array</option></select><button type="submit" disabled={loading} className="bg-gradient-to-r from-emerald-500 to-teal-500 hover:from-emerald-600 hover:to-teal-600 disabled:opacity-50 px-6 py-3 rounded-xl text-white font-semibold transition-all">{loading?'...':'Add'}</button></div></form></div><div className="bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-6"><h2 className="text-xl font-semibold mb-4 text-violet-300">Schema Nodes</h2><div className="space-y-3 max-h-96 overflow-y-auto pr-2">{nodes.map((node)=>(<div key={node.id} className="group flex items-center justify-between p-4 bg-slate-800/30 border border-white/10 rounded-xl hover:border-violet-500/50 transition-all hover:bg-slate-800/50"><div className="flex items-center gap-3"><div className="w-3 h-3 rounded-full bg-gradient-to-r from-violet-500 to-fuchsia-500"></div><div><div className="font-medium text-white">{node.key}</div><div className="text-xs text-slate-400 capitalize">{node.type}</div></div></div><button onClick={()=>deleteField(node.id)} disabled={loading} className="opacity-0 group-hover:opacity-100 text-red-400 hover:text-red-300 px-3 py-1 rounded-lg hover:bg-red-500/10 transition-all">Delete</button></div>))}</div>{nodes.length===0&&(<div className="text-center text-slate-400 py-8">No nodes yet. Parse JSON or add fields.</div>)}</div></div>{generatedInterface&&(<div className="mt-6 bg-white/10 backdrop-blur-xl border border-white/20 rounded-2xl shadow-2xl p-6"><div className="flex justify-between items-center mb-4"><h2 className="text-xl font-semibold text-violet-300">Generated TypeScript Interface</h2><button onClick={()=>{navigator.clipboard.writeText(generatedInterface);setSuccess('Copied to clipboard!');setTimeout(()=>setSuccess(''),2000)}} className="text-sm bg-white/10 hover:bg-white/20 px-4 py-2 rounded-lg transition-colors">Copy</button></div><pre className="p-4 bg-slate-900/50 rounded-xl overflow-x-auto font-mono text-sm text-emerald-400 border border-white/10">{generatedInterface}</pre></div>)}{success&&(<div className="fixed bottom-8 right-8 bg-emerald-500/90 backdrop-blur-xl text-white px-6 py-3 rounded-xl shadow-2xl border border-white/20 animate-pulse">{success}</div>)}</div></main>)}